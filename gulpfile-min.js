const gulp=require("gulp"),autoprefixer=require("gulp-autoprefixer"),cleanCSS=require("gulp-clean-css"),rename=require("gulp-rename"),sass=require("gulp-sass"),sourcemaps=require("gulp-sourcemaps"),changed=require("gulp-changed"),imagemin=require("gulp-imagemin"),imageminJpg=require("imagemin-jpeg-recompress"),imageminPng=require("imagemin-pngquant"),imageminGif=require("imagemin-gifsicle"),svgmin=require("gulp-svgmin");var concat=require("gulp-concat"),jshint=require("gulp-jshint"),uglify=require("gulp-uglify"),plumber=require("gulp-plumber"),notify=require("gulp-notify"),connect=require("gulp-connect"),browserSync=require("browser-sync"),sassGlob=require("gulp-sass-glob");const paths={src:{scss:"./src/scss/style.scss",scss_other:"./src/scss/**/*.scss",image:"src/image/*.+(jpg|jpeg|png|gif)",js:"src/js/*.js"},dist:{css:"./site/common/css/",image:"./site/common/image/",js:"./site/common/js/"}};gulp.task("sass",function(){return gulp.src(paths.src.scss,{sourcemaps:!0}).pipe(plumber()).pipe(sourcemaps.init()).pipe(sassGlob()).pipe(autoprefixer()).pipe(sass({outputStyle:"expanded"}).on("error",sass.logError)).pipe(cleanCSS()).pipe(sourcemaps.write("./")).pipe(gulp.dest(paths.dist.css))}),gulp.task("imagemin",function(){return gulp.src(paths.src.image).pipe(changed(paths.dist.image)).pipe(imagemin([imageminPng(),imageminJpg(),imageminGif({interlaced:!1,optimizationLevel:3,colors:180})])).pipe(gulp.dest(paths.dist.image))}),gulp.task("js",function(){return gulp.src(paths.src.js).pipe(jshint()).pipe(concat("common.js")).pipe(uglify()).pipe(gulp.dest(paths.dist.js))}),gulp.task("serve",function(){connect.server({root:"./site/"})}),gulp.task("bs",function(){browserSync({server:{baseDir:"./site/",index:"index.html"}})}),gulp.task("bs-reload",function(){browserSync.reload()}),gulp.task("watch",function(){gulp.watch(paths.src.scss_other,gulp.task("sass")),gulp.watch(paths.src.scss,gulp.task("sass")),gulp.watch("./site/index.html",gulp.parallel(gulp.task("bs"),gulp.task("bs-reload")))}),gulp.task("default",gulp.series("watch"));